# Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ: Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞŸĞ°Ñ€ÑĞµÑ€

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 1. PRODUCT OWNER â€” Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ¸ Roadmap

---

## 1.1 Ğ’Ğ¸Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°

**ĞœĞ¸ÑÑĞ¸Ñ:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ ÑĞ±Ğ¾Ñ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ»ÑĞ±Ñ‹Ñ… Ğ²ĞµĞ±-Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ² Ñ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ ÑƒÑ‡Ğ°ÑÑ‚Ğ¸ĞµĞ¼ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°.

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ° (KPI):**

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | MVP | v1.0 | v2.0 |
|---------|-----|------|------|
| Ğ—Ğ°Ğ´Ğ°Ñ‡/ÑÑƒÑ‚ĞºĞ¸ | 10K | 100K | 1M |
| Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ ÑĞ±Ğ¾Ñ€Ğ° | >85% | >92% | >96% |
| Ğ’Ñ€ĞµĞ¼Ñ Ğ´Ğ¾ PostgreSQL | <30 Ğ¼Ğ¸Ğ½ | <10 Ğ¼Ğ¸Ğ½ | <3 Ğ¼Ğ¸Ğ½ |
| ĞĞ²Ñ‚Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼ (ĞĞ¡) | â€” | 60% Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ | 85% Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ |
| Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ/1000 URL | â€” | <$0.50 | <$0.20 |

---

## 1.2 Roadmap Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ROADMAP                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Ğ¤ĞĞ—Ğ 1: MVP (12 Ğ½ĞµĞ´ĞµĞ»ÑŒ)                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 1-2:   Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° (Docker, RabbitMQ, PostgreSQL, MinIO)        â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 3-4:   ControlPanel API (CRUD ÑÑ…ĞµĞ¼, Ğ·Ğ°Ğ´Ğ°Ñ‡)                          â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 5-7:   UCA HTTP Worker                                              â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 8-9:   tech_data_pars + Delta Lake                                  â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 10-11: cure_data_parser + PostgreSQL Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°                       â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 12:    Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹                         â”‚
â”‚                                                                             â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ Ğ´Ğ»Ñ HTTP-Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²                        â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Ğ¤ĞĞ—Ğ 2: Browser Mode + UI (10 Ğ½ĞµĞ´ĞµĞ»ÑŒ)                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 1-3:   UCA Browser Worker (Playwright)                             â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 4-5:   ĞŸÑ€Ğ¾ĞºÑĞ¸-Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€, Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ ÑĞµÑÑĞ¸Ğ¹                             â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 6-8:   ControlPanel Web UI (React)                                 â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 9-10:  trash_swamp + Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³                                    â”‚
â”‚                                                                             â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€ Ñ UI                                â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Ğ¤ĞĞ—Ğ 3: AI-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (8 Ğ½ĞµĞ´ĞµĞ»ÑŒ)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 1-3:   Schema Generator (LLM Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ)                           â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 4-5:   ĞĞ²Ñ‚Ğ¾Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼                                          â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 6-7:   ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ²ÑĞ·ÑŒ, Ğ¿ĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ                                â”‚
â”‚  ĞĞµĞ´ĞµĞ»Ñ 8:     A/B Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                                            â”‚
â”‚                                                                             â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1.3 MVP Scope (Ğ¤Ğ°Ğ·Ğ° 1)

**Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾:**
- ControlPanel API (Ğ±ĞµĞ· UI)
- RabbitMQ Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡ + DLQ
- UCA Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ HTTP mode
- Delta Lake (ĞµĞ´Ğ¸Ğ½Ğ¾Ğµ Ğ¾Ğ·ĞµÑ€Ğ¾, Ğ±ĞµĞ· Hudi)
- cure_data_parser Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹
- PostgreSQL ĞºĞ°Ğº Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ
- JSON-ÑÑ…ĞµĞ¼Ñ‹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ XML

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ¸Ğ· MVP:**
- Browser mode
- ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ
- Web UI (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ API + Swagger)
- trash_swamp (Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ¿Ğ°Ğ¿ĞºĞ¾Ğ¹ Ğ² MinIO)
- Apache Hudi

---

## 1.4 Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑÑ‹

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° MVP:**
- 2 Backend Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°
- 1 DevOps
- 0.5 QA

**Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° (Ğ¼ĞµÑÑÑ†):**

| Ğ ĞµÑÑƒÑ€Ñ | Dev | Prod |
|--------|-----|------|
| Kubernetes | 3 nodes | 5-10 nodes |
| PostgreSQL | 2 vCPU, 8GB | 4 vCPU, 16GB |
| RabbitMQ | 1 node | 3 nodes (cluster) |
| MinIO/S3 | 100GB | 1TB+ |
| Delta Lake (Spark) | 2 workers | 5 workers |

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 2. FULL STACK DEVELOPER â€” ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ ĞºĞ¾Ğ´

---

## 2.1 Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  ControlPanel   â”‚
                              â”‚   (FastAPI)     â”‚
                              â”‚                 â”‚
                              â”‚ â€¢ Ğ¡Ñ…ĞµĞ¼Ñ‹        â”‚
                              â”‚ â€¢ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸       â”‚
                              â”‚ â€¢ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ REST API
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                           â”‚
                         â–¼                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Task Manager   â”‚         â”‚   ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ     â”‚
              â”‚   (Orchestrator)â”‚         â”‚ Schema Generatorâ”‚
              â”‚                 â”‚         â”‚                 â”‚
              â”‚ â€¢ ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ    â”‚         â”‚ â€¢ LLM API       â”‚
              â”‚ â€¢ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³    â”‚         â”‚ â€¢ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ AMQP
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    RabbitMQ     â”‚
              â”‚                 â”‚
              â”‚ â€¢ tasks.http    â”‚
              â”‚ â€¢ tasks.browser â”‚
              â”‚ â€¢ results       â”‚
              â”‚ â€¢ dlq           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚
         â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UCA HTTP       â”‚       â”‚  UCA Browser    â”‚
â”‚   Worker        â”‚       â”‚   Worker        â”‚
â”‚                 â”‚       â”‚                 â”‚
â”‚ â€¢ aiohttp       â”‚       â”‚ â€¢ Playwright    â”‚
â”‚ â€¢ Ğ›ĞµĞ³ĞºĞ¾Ğ²ĞµÑĞ½Ñ‹Ğ¹   â”‚       â”‚ â€¢ JS rendering  â”‚
â”‚ â€¢ 50 RPS/worker â”‚       â”‚ â€¢ 5 ÑĞµÑÑĞ¸Ğ¹/pod  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚     Delta Lake      â”‚
          â”‚                     â”‚
          â”‚  Bronze â”‚ Silver    â”‚
          â”‚  (raw)  â”‚ (clean)   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ cure_data_parserâ”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   PostgreSQL    â”‚
          â”‚                 â”‚        â”‚                 â”‚
          â”‚ â€¢ ĞÑ‡Ğ¸ÑÑ‚ĞºĞ°       â”‚        â”‚ â€¢ Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğµ      â”‚
          â”‚ â€¢ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ     â”‚        â”‚   Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ        â”‚
          â”‚ â€¢ Ğ¢Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ â”‚        â”‚ â€¢ Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   trash_swamp   â”‚
          â”‚    (MinIO)      â”‚
          â”‚                 â”‚
          â”‚ â€¢ Rejected      â”‚
          â”‚ â€¢ Debug dumps   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2.2 Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

```yaml
# tech-stack.yaml

backend:
  language: Python 3.12
  framework: FastAPI 0.110+
  async: asyncio + aiohttp
  validation: Pydantic v2

messaging:
  broker: RabbitMQ 3.13
  client: aio-pika
  protocol: AMQP 0.9.1

browser_automation:
  engine: Playwright
  language: Python
  browsers: [chromium, firefox]
  
data_lake:
  format: Delta Lake 3.0
  engine: Apache Spark 3.5 / DuckDB (Ğ´Ğ»Ñ dev)
  storage: MinIO (S3-compatible)

database:
  primary: PostgreSQL 16
  migrations: Alembic
  orm: SQLAlchemy 2.0

infrastructure:
  containers: Docker + docker-compose (dev)
  orchestration: Kubernetes (prod)
  secrets: HashiCorp Vault
  monitoring: Prometheus + Grafana
  logging: Loki + structured JSON logs

ai_module:
  llm_provider: Anthropic Claude / OpenAI
  local_models: Ollama (fallback)
```

---

## 2.3 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
universal-parser/
â”œâ”€â”€ docker-compose.yaml
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ alembic/
â”‚   â””â”€â”€ versions/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                 # Pydantic Settings
â”‚   â”‚
â”‚   â”œâ”€â”€ controlpanel/             # ControlPanel API
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py               # FastAPI app
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.py        # CRUD ÑÑ…ĞµĞ¼ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.py          # CRUD Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”‚   â”‚   â””â”€â”€ stats.py          # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.py         # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”‚   â”‚   â””â”€â”€ task.py
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ schema_service.py
â”‚   â”‚       â””â”€â”€ task_service.py
â”‚   â”‚
â”‚   â”œâ”€â”€ task_manager/             # ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ publisher.py          # ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ² RMQ
â”‚   â”‚   â”œâ”€â”€ consumer.py           # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
â”‚   â”‚   â””â”€â”€ retry_handler.py
â”‚   â”‚
â”‚   â”œâ”€â”€ uca/                      # Universal Crawler Agent
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ http_worker/
â”‚   â”‚   â”‚   â”œâ”€â”€ worker.py
â”‚   â”‚   â”‚   â””â”€â”€ session_manager.py
â”‚   â”‚   â”œâ”€â”€ browser_worker/
â”‚   â”‚   â”‚   â”œâ”€â”€ worker.py
â”‚   â”‚   â”‚   â”œâ”€â”€ playwright_pool.py
â”‚   â”‚   â”‚   â””â”€â”€ proxy_rotator.py
â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚       â”œâ”€â”€ task_executor.py
â”‚   â”‚       â””â”€â”€ result_builder.py
â”‚   â”‚
â”‚   â”œâ”€â”€ data_pipeline/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ delta_writer.py       # Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Delta Lake
â”‚   â”‚   â”œâ”€â”€ cure_parser.py        # ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â””â”€â”€ pg_loader.py          # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ² PostgreSQL
â”‚   â”‚
â”‚   â”œâ”€â”€ ai_module/                # ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ schema_generator.py
â”‚   â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”‚   â””â”€â”€ extraction.py
â”‚   â”‚   â””â”€â”€ validator.py
â”‚   â”‚
â”‚   â””â”€â”€ shared/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ models/               # Pydantic Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
â”‚       â”‚   â”œâ”€â”€ task_message.py
â”‚       â”‚   â””â”€â”€ result_message.py
â”‚       â”œâ”€â”€ rmq_client.py
â”‚       â””â”€â”€ delta_client.py
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”‚
â””â”€â”€ deploy/
    â”œâ”€â”€ kubernetes/
    â”‚   â”œâ”€â”€ controlpanel.yaml
    â”‚   â”œâ”€â”€ uca-http.yaml
    â”‚   â”œâ”€â”€ uca-browser.yaml
    â”‚   â””â”€â”€ rabbitmq.yaml
    â””â”€â”€ docker/
        â””â”€â”€ Dockerfile.uca
```

---

## 2.4 ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 2.4.1 Ğ¡Ñ…ĞµĞ¼Ğ° Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° (JSON Ğ²Ğ¼ĞµÑÑ‚Ğ¾ XML)

```python
# src/shared/models/parsing_schema.py

from pydantic import BaseModel, Field
from typing import Literal
from enum import Enum

class FieldType(str, Enum):
    STRING = "string"
    INTEGER = "integer"
    FLOAT = "float"
    BOOLEAN = "boolean"
    DATETIME = "datetime"
    URL = "url"
    LIST = "list"

class ExtractionMethod(str, Enum):
    CSS = "css"
    XPATH = "xpath"
    REGEX = "regex"
    JSON_PATH = "json_path"

class FieldDefinition(BaseModel):
    name: str
    type: FieldType
    method: ExtractionMethod
    selector: str
    required: bool = True
    default: str | None = None
    transformations: list[str] = []  # ["trim", "lowercase", "to_int"]
    validation_regex: str | None = None

class NavigationStep(BaseModel):
    action: Literal["goto", "click", "scroll", "wait", "input", "screenshot"]
    target: str | None = None  # CSS selector Ğ¸Ğ»Ğ¸ URL
    value: str | None = None   # Ğ”Ğ»Ñ input
    wait_ms: int = 0

class PaginationRule(BaseModel):
    type: Literal["next_button", "page_param", "infinite_scroll", "none"]
    selector: str | None = None
    param_name: str | None = None
    max_pages: int = 10

class ParsingSchema(BaseModel):
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ ÑÑ…ĞµĞ¼Ñ‹ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°"""
    
    schema_id: str
    version: str  # semver: "1.0.0"
    source_id: str
    description: str
    
    # ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ
    start_url: str
    navigation_steps: list[NavigationStep] = []
    pagination: PaginationRule | None = None
    
    # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ
    fields: list[FieldDefinition]
    
    # ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾
    min_fields_required: int = 1
    dedup_keys: list[str] = []
    
    # ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    created_at: str
    updated_at: str
    confidence: float | None = None  # ĞÑ‚ ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
    
    class Config:
        json_schema_extra = {
            "example": {
                "schema_id": "schema_001",
                "version": "1.0.0",
                "source_id": "example.com/products",
                "description": "ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²",
                "start_url": "https://example.com/catalog",
                "fields": [
                    {
                        "name": "title",
                        "type": "string",
                        "method": "css",
                        "selector": "h1.product-title",
                        "required": True,
                        "transformations": ["trim"]
                    },
                    {
                        "name": "price",
                        "type": "float",
                        "method": "css",
                        "selector": "span.price",
                        "required": True,
                        "transformations": ["extract_number"]
                    }
                ],
                "pagination": {
                    "type": "next_button",
                    "selector": "a.next-page",
                    "max_pages": 50
                },
                "dedup_keys": ["title", "url"]
            }
        }
```

### 2.4.2 Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸

```python
# src/shared/models/task_message.py

from pydantic import BaseModel, Field
from uuid import UUID, uuid4
from datetime import datetime
from typing import Literal

class TaskMessage(BaseModel):
    """Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ RabbitMQ"""
    
    task_id: UUID = Field(default_factory=uuid4)
    run_id: UUID = Field(default_factory=uuid4)
    branch_id: str | None = None
    
    # Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼
    source_id: str
    mode: Literal["http", "browser"]
    target_url: str
    
    # Ğ¡Ñ…ĞµĞ¼Ğ°
    schema_id: str
    schema_version: str
    
    # ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
    priority: int = Field(ge=0, le=10, default=5)
    max_attempts: int = Field(ge=1, le=10, default=3)
    ttl_seconds: int = Field(ge=60, le=86400, default=3600)
    
    # ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸
    proxy_profile_id: str | None = None
    session_profile_id: str | None = None
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸
    created_at: datetime = Field(default_factory=datetime.utcnow)
    
    # Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
    attempt: int = 0
    
    def next_attempt(self) -> "TaskMessage":
        """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ĞºĞ¾Ğ¿Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸"""
        return self.model_copy(update={
            "run_id": uuid4(),
            "attempt": self.attempt + 1
        })
```

### 2.4.3 Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°

```python
# src/shared/models/result_message.py

from pydantic import BaseModel, Field
from uuid import UUID
from datetime import datetime
from typing import Literal

class ExecutionMetrics(BaseModel):
    duration_ms: int
    bytes_downloaded: int
    requests_count: int
    pages_processed: int

class DataPointers(BaseModel):
    delta_path: str  # s3://bucket/delta/source_id/run_id/
    raw_html_path: str | None = None
    screenshot_path: str | None = None

class ErrorDetail(BaseModel):
    code: str
    message: str
    is_retryable: bool
    stack_trace: str | None = None

class ResultMessage(BaseModel):
    """Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ğ´Ğ»Ñ RabbitMQ"""
    
    task_id: UUID
    run_id: UUID
    
    status: Literal["success", "partial", "failed", "retry"]
    http_status: int | None = None
    
    # ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    metrics: ExecutionMetrics
    
    # Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ½Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    pointers: DataPointers
    
    # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ
    records_extracted: int = 0
    records_valid: int = 0
    records_rejected: int = 0
    
    # ĞÑˆĞ¸Ğ±ĞºĞ¸
    errors: list[ErrorDetail] = []
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸
    started_at: datetime
    completed_at: datetime = Field(default_factory=datetime.utcnow)
```

---

## 2.5 API Endpoints (OpenAPI)

```python
# src/controlpanel/api/schemas.py

from fastapi import APIRouter, HTTPException, Depends
from uuid import UUID

router = APIRouter(prefix="/api/v1/schemas", tags=["Schemas"])

@router.post("/", response_model=ParsingSchema, status_code=201)
async def create_schema(schema: ParsingSchemaCreate, db: Session = Depends(get_db)):
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ ÑÑ…ĞµĞ¼Ñƒ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°"""
    pass

@router.get("/{schema_id}", response_model=ParsingSchema)
async def get_schema(schema_id: str, version: str | None = None):
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ¿Ğ¾ ID (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ)"""
    pass

@router.get("/{schema_id}/versions", response_model=list[SchemaVersion])
async def list_versions(schema_id: str):
    """Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ²ĞµÑ€ÑĞ¸Ğ¹ ÑÑ…ĞµĞ¼Ñ‹"""
    pass

@router.put("/{schema_id}", response_model=ParsingSchema)
async def update_schema(schema_id: str, schema: ParsingSchemaUpdate):
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ)"""
    pass

@router.post("/{schema_id}/validate")
async def validate_schema(schema_id: str, test_urls: list[str]):
    """ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ½Ğ° URL-Ğ°Ñ…"""
    pass

@router.delete("/{schema_id}")
async def delete_schema(schema_id: str, version: str | None = None):
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ"""
    pass


# src/controlpanel/api/tasks.py

router = APIRouter(prefix="/api/v1/tasks", tags=["Tasks"])

@router.post("/", response_model=TaskResponse, status_code=201)
async def create_task(task: TaskCreate):
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ½Ğ° Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³"""
    pass

@router.get("/{task_id}", response_model=TaskDetail)
async def get_task(task_id: UUID):
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸"""
    pass

@router.get("/", response_model=TaskListResponse)
async def list_tasks(
    status: str | None = None,
    source_id: str | None = None,
    limit: int = 50,
    offset: int = 0
):
    """Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹"""
    pass

@router.post("/{task_id}/retry")
async def retry_task(task_id: UUID):
    """ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ½ĞµÑƒĞ´Ğ°Ñ‡Ğ½ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ"""
    pass

@router.post("/{task_id}/cancel")
async def cancel_task(task_id: UUID):
    """ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ"""
    pass

@router.get("/dlq", response_model=list[TaskDetail])
async def list_dlq_tasks():
    """Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² Dead Letter Queue"""
    pass

@router.post("/dlq/{task_id}/requeue")
async def requeue_dlq_task(task_id: UUID):
    """Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ¸Ğ· DLQ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ"""
    pass
```

---

## 2.6 UCA HTTP Worker

```python
# src/uca/http_worker/worker.py

import asyncio
import aiohttp
from aio_pika import connect_robust, IncomingMessage
from src.shared.models import TaskMessage, ResultMessage
from src.shared.delta_client import DeltaWriter

class HTTPWorker:
    def __init__(self, config: WorkerConfig):
        self.config = config
        self.session: aiohttp.ClientSession | None = None
        self.delta_writer = DeltaWriter(config.delta_path)
        
    async def start(self):
        """Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²Ğ¾Ñ€ĞºĞµÑ€Ğ°"""
        connection = await connect_robust(self.config.rmq_url)
        channel = await connection.channel()
        await channel.set_qos(prefetch_count=self.config.prefetch)
        
        queue = await channel.get_queue("tasks.http")
        await queue.consume(self.process_task)
        
    async def process_task(self, message: IncomingMessage):
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸"""
        async with message.process():
            task = TaskMessage.model_validate_json(message.body)
            
            try:
                result = await self.execute(task)
                await self.publish_result(result)
                
            except RetryableError as e:
                if task.attempt < task.max_attempts:
                    await self.requeue(task.next_attempt())
                else:
                    await self.send_to_dlq(task, e)
                    
            except Exception as e:
                await self.send_to_dlq(task, e)
                
    async def execute(self, task: TaskMessage) -> ResultMessage:
        """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ HTTP-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ¸ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
        start_time = datetime.utcnow()
        
        async with self.session.get(
            task.target_url,
            proxy=self.get_proxy(task.proxy_profile_id),
            headers=self.get_headers(task.session_profile_id),
            timeout=aiohttp.ClientTimeout(total=30)
        ) as response:
            
            html = await response.text()
            http_status = response.status
            
        # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ÑÑ…ĞµĞ¼Ğµ
        schema = await self.get_schema(task.schema_id, task.schema_version)
        records = self.extract_data(html, schema)
        
        # Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Delta Lake
        delta_path = await self.delta_writer.write(
            records=records,
            task_id=task.task_id,
            run_id=task.run_id,
            source_id=task.source_id
        )
        
        return ResultMessage(
            task_id=task.task_id,
            run_id=task.run_id,
            status="success" if records else "partial",
            http_status=http_status,
            metrics=ExecutionMetrics(
                duration_ms=int((datetime.utcnow() - start_time).total_seconds() * 1000),
                bytes_downloaded=len(html),
                requests_count=1,
                pages_processed=1
            ),
            pointers=DataPointers(delta_path=delta_path),
            records_extracted=len(records),
            records_valid=len([r for r in records if r.is_valid]),
            started_at=start_time
        )
        
    def extract_data(self, html: str, schema: ParsingSchema) -> list[dict]:
        """Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ ÑÑ…ĞµĞ¼Ğµ"""
        from selectolax.parser import HTMLParser
        
        tree = HTMLParser(html)
        records = []
        
        for field in schema.fields:
            if field.method == ExtractionMethod.CSS:
                nodes = tree.css(field.selector)
                # ... Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
                
        return records
```

---

## 2.7 RabbitMQ Configuration

```python
# src/shared/rmq_config.py

EXCHANGES = {
    "parser.direct": {
        "type": "direct",
        "durable": True
    },
    "parser.dlq": {
        "type": "direct", 
        "durable": True
    }
}

QUEUES = {
    "tasks.http": {
        "durable": True,
        "arguments": {
            "x-max-priority": 10,
            "x-dead-letter-exchange": "parser.dlq",
            "x-dead-letter-routing-key": "dlq.tasks"
        }
    },
    "tasks.browser": {
        "durable": True,
        "arguments": {
            "x-max-priority": 10,
            "x-dead-letter-exchange": "parser.dlq",
            "x-dead-letter-routing-key": "dlq.tasks"
        }
    },
    "results": {
        "durable": True
    },
    "dlq.tasks": {
        "durable": True,
        "arguments": {
            "x-message-ttl": 604800000  # 7 Ğ´Ğ½ĞµĞ¹
        }
    }
}

BINDINGS = [
    {"queue": "tasks.http", "exchange": "parser.direct", "routing_key": "task.http"},
    {"queue": "tasks.browser", "exchange": "parser.direct", "routing_key": "task.browser"},
    {"queue": "results", "exchange": "parser.direct", "routing_key": "result"},
    {"queue": "dlq.tasks", "exchange": "parser.dlq", "routing_key": "dlq.tasks"}
]
```

---

## 2.8 Docker Compose (Development)

```yaml
# docker-compose.yaml

version: "3.9"

services:
  controlpanel:
    build:
      context: .
      dockerfile: deploy/docker/Dockerfile.controlpanel
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://parser:parser@postgres:5432/parser
      - RMQ_URL=amqp://guest:guest@rabbitmq:5672/
      - MINIO_ENDPOINT=minio:9000
    depends_on:
      - postgres
      - rabbitmq
      - minio

  uca-http:
    build:
      context: .
      dockerfile: deploy/docker/Dockerfile.uca
    command: python -m src.uca.http_worker
    environment:
      - RMQ_URL=amqp://guest:guest@rabbitmq:5672/
      - DELTA_PATH=s3://parser-lake/delta/
      - MINIO_ENDPOINT=minio:9000
    deploy:
      replicas: 3
    depends_on:
      - rabbitmq
      - minio

  uca-browser:
    build:
      context: .
      dockerfile: deploy/docker/Dockerfile.uca-browser
    command: python -m src.uca.browser_worker
    environment:
      - RMQ_URL=amqp://guest:guest@rabbitmq:5672/
      - DELTA_PATH=s3://parser-lake/delta/
      - PLAYWRIGHT_BROWSERS_PATH=/ms-playwright
    deploy:
      replicas: 2
      resources:
        limits:
          memory: 2G
    depends_on:
      - rabbitmq
      - minio

  cure-parser:
    build:
      context: .
      dockerfile: deploy/docker/Dockerfile.cure
    command: python -m src.data_pipeline.cure_parser
    environment:
      - DATABASE_URL=postgresql://parser:parser@postgres:5432/parser
      - DELTA_PATH=s3://parser-lake/delta/
    depends_on:
      - postgres
      - minio

  rabbitmq:
    image: rabbitmq:3.13-management
    ports:
      - "5672:5672"
      - "15672:15672"
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq

  postgres:
    image: postgres:16
    environment:
      POSTGRES_USER: parser
      POSTGRES_PASSWORD: parser
      POSTGRES_DB: parser
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  minio:
    image: minio/minio
    command: server /data --console-address ":9001"
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - minio_data:/data

  spark:
    image: bitnami/spark:3.5
    environment:
      - SPARK_MODE=master
    ports:
      - "8080:8080"
      - "7077:7077"

volumes:
  postgres_data:
  rabbitmq_data:
  minio_data:
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 3. UX/UI ENGINEER â€” Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ ControlPanel

---

## 3.1 Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
ControlPanel UI
â”‚
â”œâ”€â”€ ğŸ“Š Dashboard (Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ)
â”‚   â”œâ”€â”€ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)
â”‚   â”œâ”€â”€ Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ·Ğ° 24Ñ‡
â”‚   â”œâ”€â”€ Ğ¢Ğ¾Ğ¿ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
â”‚   â””â”€â”€ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (live)
â”‚
â”œâ”€â”€ ğŸ“‹ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸
â”‚   â”œâ”€â”€ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ (Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° + Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹)
â”‚   â”œâ”€â”€ Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
â”‚   â”œâ”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (wizard)
â”‚   â””â”€â”€ DLQ Manager
â”‚
â”œâ”€â”€ ğŸ“ Ğ¡Ñ…ĞµĞ¼Ñ‹
â”‚   â”œâ”€â”€ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ ÑÑ…ĞµĞ¼
â”‚   â”œâ”€â”€ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ…ĞµĞ¼Ñ‹ (visual + code)
â”‚   â”œâ”€â”€ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¹
â”‚   â”œâ”€â”€ Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ…ĞµĞ¼Ñ‹
â”‚   â””â”€â”€ ĞĞ¡-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€
â”‚
â”œâ”€â”€ ğŸŒ Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸
â”‚   â”œâ”€â”€ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
â”‚   â”œâ”€â”€ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºÑƒ
â”‚   â””â”€â”€ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ rate-limit
â”‚
â”œâ”€â”€ âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”‚   â”œâ”€â”€ ĞŸÑ€Ğ¾ĞºÑĞ¸-Ğ¿ÑƒĞ»Ñ‹
â”‚   â”œâ”€â”€ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ¾Ğ²
â”‚   â””â”€â”€ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚
â””â”€â”€ ğŸ“ˆ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
    â”œâ”€â”€ ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹
    â””â”€â”€ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚
```

---

## 3.2 Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°

```css
/* design-tokens.css */

:root {
  /* Ğ¦Ğ²ĞµÑ‚Ğ° */
  --color-primary: #2563EB;      /* Blue 600 */
  --color-primary-dark: #1D4ED8;
  --color-secondary: #7C3AED;    /* Violet 600 */
  
  --color-success: #10B981;      /* Emerald 500 */
  --color-warning: #F59E0B;      /* Amber 500 */
  --color-error: #EF4444;        /* Red 500 */
  --color-info: #3B82F6;         /* Blue 500 */
  
  --color-bg-primary: #FFFFFF;
  --color-bg-secondary: #F9FAFB; /* Gray 50 */
  --color-bg-tertiary: #F3F4F6; /* Gray 100 */
  
  --color-text-primary: #111827;  /* Gray 900 */
  --color-text-secondary: #6B7280; /* Gray 500 */
  --color-text-muted: #9CA3AF;    /* Gray 400 */
  
  --color-border: #E5E7EB;        /* Gray 200 */
  
  /* Ğ¢Ğ¸Ğ¿Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ° */
  --font-sans: 'Inter', -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  
  --text-xs: 0.75rem;   /* 12px */
  --text-sm: 0.875rem;  /* 14px */
  --text-base: 1rem;    /* 16px */
  --text-lg: 1.125rem;  /* 18px */
  --text-xl: 1.25rem;   /* 20px */
  --text-2xl: 1.5rem;   /* 24px */
  --text-3xl: 1.875rem; /* 30px */
  
  /* ĞÑ‚ÑÑ‚ÑƒĞ¿Ñ‹ */
  --spacing-1: 0.25rem;  /* 4px */
  --spacing-2: 0.5rem;   /* 8px */
  --spacing-3: 0.75rem;  /* 12px */
  --spacing-4: 1rem;     /* 16px */
  --spacing-6: 1.5rem;   /* 24px */
  --spacing-8: 2rem;     /* 32px */
  
  /* Ğ Ğ°Ğ´Ğ¸ÑƒÑÑ‹ */
  --radius-sm: 0.25rem;  /* 4px */
  --radius-md: 0.375rem; /* 6px */
  --radius-lg: 0.5rem;   /* 8px */
  --radius-xl: 0.75rem;  /* 12px */
  
  /* Ğ¢ĞµĞ½Ğ¸ */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
}
```

---

## 3.3 Wireframes ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²

### Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  Universal Parser                                    ğŸ””  ğŸ‘¤ Admin â–¼    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   12,847    â”‚ â”‚    89.2%    â”‚ â”‚     847     â”‚ â”‚      23     â”‚          â”‚
â”‚  â”‚  Ğ—Ğ°Ğ´Ğ°Ñ‡      â”‚ â”‚  Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ñ…   â”‚ â”‚  ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ…   â”‚ â”‚   Ğ’ DLQ     â”‚          â”‚
â”‚  â”‚  ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ    â”‚ â”‚             â”‚ â”‚             â”‚ â”‚   âš ï¸        â”‚          â”‚
â”‚  â”‚  â†‘ 12%      â”‚ â”‚  â†‘ 2.1%     â”‚ â”‚             â”‚ â”‚   â†“ 5       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ·Ğ° 24 Ñ‡Ğ°ÑĞ°                  â”‚ â”‚  Ğ¢Ğ¾Ğ¿-5 Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº                 â”‚â”‚
â”‚  â”‚                                     â”‚ â”‚                                â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ                               â”‚ â”‚  1. Timeout (234)              â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ                            â”‚ â”‚  2. 403 Forbidden (156)        â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ                          â”‚ â”‚  3. Selector not found (89)    â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ                       â”‚ â”‚  4. Proxy error (45)           â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ                  â”‚ â”‚  5. Rate limit (23)            â”‚â”‚
â”‚  â”‚  â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”               â”‚ â”‚                                â”‚â”‚
â”‚  â”‚  00:00    06:00   12:00   18:00     â”‚ â”‚                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸                                           [Ğ’ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ â†’] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ID          â”‚ Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº      â”‚ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ      â”‚ ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ  â”‚ Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ      â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ task-a1b2   â”‚ shop.ru       â”‚ âŸ³ Running   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘ 78% â”‚ [Pause][Stop] â”‚â”‚
â”‚  â”‚ task-c3d4   â”‚ news.com      â”‚ âŸ³ Running   â”‚ â–ˆâ–ˆâ–‘â–‘â–‘ 34% â”‚ [Pause][Stop] â”‚â”‚
â”‚  â”‚ task-e5f6   â”‚ api.data.io   â”‚ â— Queued    â”‚ â–‘â–‘â–‘â–‘â–‘ 0%  â”‚ [Start][Del]  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ…ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Ğ¡Ñ…ĞµĞ¼Ñ‹  /  shop.ru_products  /  v1.2.0                    [Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€    [ĞšĞ¾Ğ´]  â”‚  â”‚  ĞŸÑ€ĞµĞ²ÑŒÑ                          â”‚ â”‚
â”‚  â”‚                                 â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  URL: https://shop.ru/catalog  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚                                 â”‚  â”‚  â”‚  ğŸŒ shop.ru/catalog        â”‚  â”‚ â”‚
â”‚  â”‚  â”Œâ”€ ĞŸĞ¾Ğ»Ñ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                          â”‚   â”‚  â”‚  â”‚  Ğ¢Ğ¾Ğ²Ğ°Ñ€ 1        599 â‚½     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  [+] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ       â”‚   â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                          â”‚   â”‚  â”‚  â”‚  Ğ¢Ğ¾Ğ²Ğ°Ñ€ 2        899 â‚½     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ“ title               â”‚   â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚     CSS: h1.product-name â”‚   â”‚  â”‚  â”‚  Ğ¢Ğ¾Ğ²Ğ°Ñ€ 3       1299 â‚½     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚     Ğ¢Ğ¸Ğ¿: string          â”‚   â”‚  â”‚  â”‚                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚     [Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ]      â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”‚                          â”‚   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ’° price               â”‚   â”‚  â”‚  Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¾: 3 Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸            â”‚ â”‚
â”‚  â”‚  â”‚     CSS: span.price      â”‚   â”‚  â”‚  âœ“ title: "Ğ¢Ğ¾Ğ²Ğ°Ñ€ 1"            â”‚ â”‚
â”‚  â”‚  â”‚     Ğ¢Ğ¸Ğ¿: float           â”‚   â”‚  â”‚  âœ“ price: 599.0                â”‚ â”‚
â”‚  â”‚  â”‚     [Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ]      â”‚   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚                          â”‚   â”‚  â”‚  [Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° URL]          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚                                 â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€ ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚  Ğ¢Ğ¸Ğ¿: next_button        â”‚   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚  Ğ¡ĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€: a.next        â”‚   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â”‚  Max ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†: 50         â”‚   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚                                 â”‚  â”‚                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  [ğŸ¤– Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ AI]    [ğŸ“‹ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ]    [â–¶ Ğ¢ĞµÑÑ‚-Ğ·Ğ°Ğ¿ÑƒÑĞº]  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞĞ¡-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ ÑÑ…ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI Schema Generator                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  Ğ¨Ğ°Ğ³ 1: ĞĞ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  URL ÑĞ°Ğ¹Ñ‚Ğ°:                                                            â”‚â”‚
â”‚  â”‚  [ https://example-shop.com/products                              ]    â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  Ğ§Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ:                                                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ ĞÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²: Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ†ĞµĞ½Ğ°, Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»,         â”‚  â”‚â”‚
â”‚  â”‚  â”‚ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ, ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ                        â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¿Ğ¾Ğ»ĞµĞ¹ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):                                          â”‚â”‚
â”‚  â”‚  [ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ†ĞµĞ½Ğ°, SKU, Ğ² Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸, Ñ„Ğ¾Ñ‚Ğ¾                          ]    â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚                              [ğŸ” ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ°Ğ¹Ñ‚]                       â”‚
â”‚                                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                            â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  âœ“ Ğ¡Ğ°Ğ¹Ñ‚ Ğ¿Ñ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½                                               â”‚â”‚
â”‚  â”‚  âœ“ ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ 5 Ğ¿Ğ¾Ğ»ĞµĞ¹                                                    â”‚â”‚
â”‚  â”‚  âš ï¸ Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ: 87%                                                  â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ:                                                       â”‚â”‚
â”‚  â”‚  â€¢ Ğ¦ĞµĞ½Ğ° Ğ² Ğ½ĞµÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ             â”‚â”‚
â”‚  â”‚  â€¢ ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· infinite scroll â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ browser mode           â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚  ĞŸĞ¾Ğ»Ğµ        â”‚ Ğ¡ĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€              â”‚ Ğ¢Ğ¸Ğ¿    â”‚ Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ    â”‚   â”‚â”‚
â”‚  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”‚
â”‚  â”‚  â”‚  title       â”‚ h2.product-title      â”‚ string â”‚ 95%            â”‚   â”‚â”‚
â”‚  â”‚  â”‚  price       â”‚ span.price-value      â”‚ float  â”‚ 89%            â”‚   â”‚â”‚
â”‚  â”‚  â”‚  sku         â”‚ div.sku-code          â”‚ string â”‚ 92%            â”‚   â”‚â”‚
â”‚  â”‚  â”‚  in_stock    â”‚ span.availability     â”‚ bool   â”‚ 78%            â”‚   â”‚â”‚
â”‚  â”‚  â”‚  image_url   â”‚ img.product-image@src â”‚ url    â”‚ 94%            â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  [Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ]  [Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° 5 ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°Ñ…]  [âœ“ ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3.4 ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ React

```typescript
// components/TaskStatusBadge.tsx

import { Badge } from '@/components/ui/badge';

type TaskStatus = 'queued' | 'running' | 'success' | 'failed' | 'retry' | 'dlq';

const statusConfig: Record<TaskStatus, { label: string; variant: string; icon: string }> = {
  queued: { label: 'Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸', variant: 'secondary', icon: 'â—' },
  running: { label: 'Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ', variant: 'default', icon: 'âŸ³' },
  success: { label: 'Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾', variant: 'success', icon: 'âœ“' },
  failed: { label: 'ĞÑˆĞ¸Ğ±ĞºĞ°', variant: 'destructive', icon: 'âœ—' },
  retry: { label: 'ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€', variant: 'warning', icon: 'â†»' },
  dlq: { label: 'DLQ', variant: 'destructive', icon: 'âš ' },
};

export function TaskStatusBadge({ status }: { status: TaskStatus }) {
  const config = statusConfig[status];
  return (
    <Badge variant={config.variant}>
      {config.icon} {config.label}
    </Badge>
  );
}


// components/SchemaFieldEditor.tsx

import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Select } from '@/components/ui/select';

interface FieldEditorProps {
  field: FieldDefinition;
  onChange: (field: FieldDefinition) => void;
  onTest: (selector: string) => Promise<TestResult>;
}

export function SchemaFieldEditor({ field, onChange, onTest }: FieldEditorProps) {
  const [testResult, setTestResult] = useState<TestResult | null>(null);
  
  const handleTest = async () => {
    const result = await onTest(field.selector);
    setTestResult(result);
  };
  
  return (
    <Card>
      <CardHeader>
        <Input
          value={field.name}
          onChange={(e) => onChange({ ...field, name: e.target.value })}
          placeholder="Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»Ñ"
        />
      </CardHeader>
      <CardContent className="space-y-4">
        <div className="grid grid-cols-2 gap-4">
          <Select
            value={field.method}
            onValueChange={(v) => onChange({ ...field, method: v })}
          >
            <option value="css">CSS Selector</option>
            <option value="xpath">XPath</option>
            <option value="regex">RegEx</option>
          </Select>
          
          <Select
            value={field.type}
            onValueChange={(v) => onChange({ ...field, type: v })}
          >
            <option value="string">Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ°</option>
            <option value="integer">Ğ¦ĞµĞ»Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾</option>
            <option value="float">Ğ§Ğ¸ÑĞ»Ğ¾</option>
            <option value="boolean">Ğ”Ğ°/ĞĞµÑ‚</option>
            <option value="datetime">Ğ”Ğ°Ñ‚Ğ°/Ğ²Ñ€ĞµĞ¼Ñ</option>
          </Select>
        </div>
        
        <div className="flex gap-2">
          <Input
            value={field.selector}
            onChange={(e) => onChange({ ...field, selector: e.target.value })}
            placeholder="div.product-title"
            className="font-mono"
          />
          <Button onClick={handleTest} variant="outline">
            Ğ¢ĞµÑÑ‚
          </Button>
        </div>
        
        {testResult && (
          <div className={`p-2 rounded ${testResult.success ? 'bg-green-50' : 'bg-red-50'}`}>
            {testResult.success ? (
              <span className="text-green-700">âœ“ ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾: {testResult.value}</span>
            ) : (
              <span className="text-red-700">âœ— {testResult.error}</span>
            )}
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 4. AI ENGINEER â€” ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ…ĞµĞ¼

---

## 4.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI SCHEMA GENERATOR                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      API Gateway            â”‚
                    â”‚   POST /api/v1/ai/generate  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PIPELINE ORCHESTRATOR                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚  STEP 1   â”‚â”€â”€â”€â–¶â”‚  STEP 2   â”‚â”€â”€â”€â–¶â”‚  STEP 3   â”‚â”€â”€â”€â–¶â”‚  STEP 4   â”‚        â”‚
â”‚   â”‚  Crawler  â”‚    â”‚  Analyzer â”‚    â”‚ Generator â”‚    â”‚ Validator â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                â”‚                â”‚                â”‚                â”‚
â”‚        â–¼                â–¼                â–¼                â–¼                â”‚
â”‚   HTML + screenshot  Structure      JSON Schema     Test Results          â”‚
â”‚                      analysis       + confidence    + fixes               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Response               â”‚
                    â”‚  â€¢ schema                   â”‚
                    â”‚  â€¢ confidence               â”‚
                    â”‚  â€¢ warnings                 â”‚
                    â”‚  â€¢ test_results             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4.2 Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½Ğ°

```python
# src/ai_module/schema_generator.py

from dataclasses import dataclass
from anthropic import Anthropic
from playwright.async_api import async_playwright

@dataclass
class GenerationRequest:
    url: str
    goal_description: str
    example_fields: list[str] | None = None
    constraints: dict | None = None

@dataclass
class GenerationResult:
    schema: ParsingSchema
    confidence: float
    warnings: list[str]
    test_results: list[TestResult]

class SchemaGenerator:
    def __init__(self, config: AIConfig):
        self.config = config
        self.client = Anthropic(api_key=config.anthropic_api_key)
        
    async def generate(self, request: GenerationRequest) -> GenerationResult:
        """Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ…ĞµĞ¼Ñ‹"""
        
        # Step 1: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ HTML Ğ¸ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚
        page_data = await self._crawl_page(request.url)
        
        # Step 2: ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
        structure = await self._analyze_structure(page_data, request.goal_description)
        
        # Step 3: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹
        schema = await self._generate_schema(structure, request)
        
        # Step 4: Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
        test_results = await self._validate_schema(schema, request.url)
        
        # Step 5: Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
        if not all(r.success for r in test_results):
            schema = await self._fix_schema(schema, test_results)
            test_results = await self._validate_schema(schema, request.url)
        
        return GenerationResult(
            schema=schema,
            confidence=self._calculate_confidence(test_results),
            warnings=self._collect_warnings(structure, test_results),
            test_results=test_results
        )
        
    async def _crawl_page(self, url: str) -> PageData:
        """ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ HTML Ğ¸ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹"""
        async with async_playwright() as p:
            browser = await p.chromium.launch()
            page = await browser.new_page()
            
            await page.goto(url, wait_until="networkidle")
            
            html = await page.content()
            screenshot = await page.screenshot(full_page=True)
            
            # Ğ¢Ğ°ĞºĞ¶Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ DOM-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
            dom_tree = await page.evaluate("""
                () => {
                    function getTree(el, depth = 0) {
                        if (depth > 5) return null;
                        return {
                            tag: el.tagName?.toLowerCase(),
                            classes: Array.from(el.classList || []),
                            id: el.id,
                            text: el.textContent?.slice(0, 100),
                            children: Array.from(el.children || [])
                                .slice(0, 10)
                                .map(c => getTree(c, depth + 1))
                                .filter(Boolean)
                        };
                    }
                    return getTree(document.body);
                }
            """)
            
            await browser.close()
            
            return PageData(
                url=url,
                html=html,
                screenshot=screenshot,
                dom_tree=dom_tree
            )
            
    async def _analyze_structure(
        self, 
        page_data: PageData, 
        goal: str
    ) -> StructureAnalysis:
        """ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ LLM"""
        
        prompt = f"""Analyze this webpage structure to extract data.

Goal: {goal}

DOM Structure (simplified):
{json.dumps(page_data.dom_tree, indent=2)[:8000]}

HTML snippet (first 5000 chars):
{page_data.html[:5000]}

Identify:
1. What type of page is this? (catalog, product page, article, etc.)
2. What repeating elements exist? (product cards, list items, etc.)
3. What data fields can be extracted?
4. Is there pagination? What type?
5. Does the page require JavaScript rendering?

Respond in JSON format:
{{
    "page_type": "...",
    "repeating_container": "CSS selector for container",
    "repeating_item": "CSS selector for each item",
    "fields": [
        {{"name": "...", "selector": "...", "type": "...", "confidence": 0.0-1.0}}
    ],
    "pagination": {{"type": "...", "selector": "..."}},
    "requires_js": true/false,
    "notes": ["..."]
}}"""

        response = self.client.messages.create(
            model="claude-sonnet-4-20250514",
            max_tokens=2000,
            messages=[{"role": "user", "content": prompt}]
        )
        
        return StructureAnalysis.model_validate_json(
            response.content[0].text
        )
        
    async def _generate_schema(
        self,
        structure: StructureAnalysis,
        request: GenerationRequest
    ) -> ParsingSchema:
        """Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ…ĞµĞ¼Ñ‹ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°"""
        
        prompt = f"""Generate a parsing schema based on this analysis.

Page Analysis:
{json.dumps(structure.model_dump(), indent=2)}

User Goal: {request.goal_description}
Requested Fields: {request.example_fields or 'auto-detect'}
Constraints: {request.constraints or 'none'}

Generate a complete ParsingSchema in JSON with:
1. Precise CSS selectors (prefer classes over complex paths)
2. Appropriate data types and transformations
3. Validation rules where applicable
4. Pagination configuration if detected

Schema format:
{{
    "schema_id": "auto_generated_{uuid}",
    "version": "1.0.0",
    "source_id": "{urlparse(request.url).netloc}",
    "description": "...",
    "start_url": "{request.url}",
    "fields": [...],
    "pagination": {{...}},
    "dedup_keys": [...]
}}

IMPORTANT: 
- Use simple, robust selectors
- Add fallback selectors where possible
- Include data transformations for cleaning"""

        response = self.client.messages.create(
            model="claude-sonnet-4-20250514",
            max_tokens=3000,
            messages=[{"role": "user", "content": prompt}]
        )
        
        schema_json = self._extract_json(response.content[0].text)
        return ParsingSchema.model_validate(schema_json)
        
    async def _validate_schema(
        self,
        schema: ParsingSchema,
        url: str
    ) -> list[TestResult]:
        """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ"""
        
        async with async_playwright() as p:
            browser = await p.chromium.launch()
            page = await browser.new_page()
            await page.goto(url, wait_until="networkidle")
            
            results = []
            
            for field in schema.fields:
                try:
                    elements = await page.query_selector_all(field.selector)
                    
                    if not elements:
                        results.append(TestResult(
                            field=field.name,
                            success=False,
                            error=f"Selector '{field.selector}' found 0 elements"
                        ))
                        continue
                        
                    # Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
                    value = await elements[0].text_content()
                    
                    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿
                    if field.type == FieldType.FLOAT:
                        try:
                            float(re.sub(r'[^\d.,]', '', value))
                        except:
                            results.append(TestResult(
                                field=field.name,
                                success=False,
                                error=f"Cannot parse '{value}' as float"
                            ))
                            continue
                            
                    results.append(TestResult(
                        field=field.name,
                        success=True,
                        value=value,
                        elements_count=len(elements)
                    ))
                    
                except Exception as e:
                    results.append(TestResult(
                        field=field.name,
                        success=False,
                        error=str(e)
                    ))
                    
            await browser.close()
            return results
            
    async def _fix_schema(
        self,
        schema: ParsingSchema,
        test_results: list[TestResult]
    ) -> ParsingSchema:
        """Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ…ĞµĞ¼Ñ‹ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"""
        
        failed_fields = [r for r in test_results if not r.success]
        
        prompt = f"""Fix the following parsing schema based on test results.

Current Schema:
{schema.model_dump_json(indent=2)}

Failed Fields:
{json.dumps([r.model_dump() for r in failed_fields], indent=2)}

For each failed field:
1. Analyze the error
2. Suggest an alternative selector
3. Update the schema

Return the corrected schema in the same JSON format."""

        response = self.client.messages.create(
            model="claude-sonnet-4-20250514",
            max_tokens=3000,
            messages=[{"role": "user", "content": prompt}]
        )
        
        fixed_json = self._extract_json(response.content[0].text)
        return ParsingSchema.model_validate(fixed_json)
        
    def _calculate_confidence(self, test_results: list[TestResult]) -> float:
        """Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±Ñ‰ĞµĞ¹ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸"""
        if not test_results:
            return 0.0
        successful = sum(1 for r in test_results if r.success)
        return successful / len(test_results)
        
    def _collect_warnings(
        self,
        structure: StructureAnalysis,
        test_results: list[TestResult]
    ) -> list[str]:
        """Ğ¡Ğ±Ğ¾Ñ€ Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹"""
        warnings = []
        
        if structure.requires_js:
            warnings.append("Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ JavaScript â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ browser mode")
            
        low_confidence = [f.name for f in structure.fields if f.confidence < 0.8]
        if low_confidence:
            warnings.append(f"ĞĞ¸Ğ·ĞºĞ°Ñ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ² Ğ¿Ğ¾Ğ»ÑÑ…: {', '.join(low_confidence)}")
            
        failed = [r.field for r in test_results if not r.success]
        if failed:
            warnings.append(f"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ: {', '.join(failed)}")
            
        return warnings
```

---

## 4.3 API Ğ´Ğ»Ñ ĞĞ¡-Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ

```python
# src/controlpanel/api/ai.py

from fastapi import APIRouter, BackgroundTasks
from src.ai_module.schema_generator import SchemaGenerator, GenerationRequest

router = APIRouter(prefix="/api/v1/ai", tags=["AI"])

@router.post("/generate", response_model=GenerationTaskResponse)
async def generate_schema(
    request: GenerationRequest,
    background_tasks: BackgroundTasks
):
    """Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹ (async)"""
    task_id = str(uuid4())
    
    background_tasks.add_task(
        run_generation,
        task_id=task_id,
        request=request
    )
    
    return GenerationTaskResponse(
        task_id=task_id,
        status="processing",
        estimated_time_seconds=30
    )

@router.get("/generate/{task_id}", response_model=GenerationResult)
async def get_generation_result(task_id: str):
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸"""
    result = await get_result_from_cache(task_id)
    
    if not result:
        raise HTTPException(404, "Task not found or still processing")
        
    return result

@router.post("/analyze", response_model=StructureAnalysis)
async def analyze_page(url: str, goal: str):
    """Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ±ĞµĞ· Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ…ĞµĞ¼Ñ‹"""
    generator = SchemaGenerator(get_ai_config())
    page_data = await generator._crawl_page(url)
    return await generator._analyze_structure(page_data, goal)

@router.post("/validate", response_model=list[TestResult])
async def validate_schema(schema: ParsingSchema, test_url: str):
    """ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ½Ğ° URL"""
    generator = SchemaGenerator(get_ai_config())
    return await generator._validate_schema(schema, test_url)
```

---

## 4.4 ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ¸ few-shot Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹

```python
# src/ai_module/prompts/extraction.py

STRUCTURE_ANALYSIS_PROMPT = """You are an expert web scraping analyst. Analyze the webpage structure to identify extractable data.

<examples>
<example>
<input>
URL: https://shop.example.com/products
Goal: Extract product catalog
DOM: div.products-grid > div.product-card (Ã—24)
</input>
<output>
{
  "page_type": "product_catalog",
  "repeating_container": "div.products-grid",
  "repeating_item": "div.product-card",
  "fields": [
    {"name": "title", "selector": "h3.product-name", "type": "string", "confidence": 0.95},
    {"name": "price", "selector": "span.price", "type": "float", "confidence": 0.92},
    {"name": "image", "selector": "img.product-img", "attribute": "src", "type": "url", "confidence": 0.98}
  ],
  "pagination": {"type": "next_button", "selector": "a.pagination-next"},
  "requires_js": false
}
</output>
</example>

<example>
<input>
URL: https://news.example.com/article/12345
Goal: Extract article content
DOM: article.main-content > ...
</input>
<output>
{
  "page_type": "article",
  "repeating_container": null,
  "repeating_item": null,
  "fields": [
    {"name": "headline", "selector": "h1.article-title", "type": "string", "confidence": 0.98},
    {"name": "author", "selector": "span.author-name", "type": "string", "confidence": 0.85},
    {"name": "published_date", "selector": "time.pub-date", "attribute": "datetime", "type": "datetime", "confidence": 0.90},
    {"name": "content", "selector": "div.article-body", "type": "string", "confidence": 0.95}
  ],
  "pagination": null,
  "requires_js": false
}
</output>
</example>
</examples>

Now analyze this page:

URL: {url}
Goal: {goal}
DOM Structure:
{dom_tree}

Respond ONLY with valid JSON matching the format above."""


SELECTOR_IMPROVEMENT_PROMPT = """The selector "{selector}" failed with error: {error}

Page HTML context:
{html_context}

Suggest 3 alternative selectors from most to least specific:
1. Most specific (using classes and attributes)
2. Medium specificity (using parent-child relationships)  
3. Most robust (using text content or data attributes)

Respond in JSON:
{
  "alternatives": [
    {"selector": "...", "type": "css/xpath", "confidence": 0.0-1.0},
    ...
  ],
  "recommended": 0
}"""
```

---

## 4.5 Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ²ÑĞ·Ğ¸

```python
# src/ai_module/feedback.py

class FeedbackCollector:
    """Ğ¡Ğ±Ğ¾Ñ€ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ²ÑĞ·Ğ¸ Ğ´Ğ»Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸"""
    
    async def record_schema_approval(
        self,
        schema_id: str,
        original_schema: ParsingSchema,
        approved: bool,
        user_corrections: dict | None = None
    ):
        """Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„Ğ°ĞºÑ‚ Ğ¾Ğ´Ğ¾Ğ±Ñ€ĞµĞ½Ğ¸Ñ/Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹"""
        
        await self.db.feedback.insert_one({
            "schema_id": schema_id,
            "timestamp": datetime.utcnow(),
            "original_schema": original_schema.model_dump(),
            "approved": approved,
            "corrections": user_corrections,
            "url": original_schema.start_url,
            "domain": urlparse(original_schema.start_url).netloc
        })
        
        # Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² Ğ¾Ğ±ÑƒÑ‡Ğ°ÑÑ‰ÑƒÑ Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºÑƒ
        if user_corrections:
            await self._add_to_training_set(
                original=original_schema,
                corrected=user_corrections
            )
            
    async def get_domain_statistics(self, domain: str) -> DomainStats:
        """Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾ Ğ´Ğ¾Ğ¼ĞµĞ½Ñƒ"""
        
        pipeline = [
            {"$match": {"domain": domain}},
            {"$group": {
                "_id": None,
                "total": {"$sum": 1},
                "approved": {"$sum": {"$cond": ["$approved", 1, 0]}},
                "with_corrections": {"$sum": {"$cond": ["$corrections", 1, 0]}}
            }}
        ]
        
        result = await self.db.feedback.aggregate(pipeline).to_list(1)
        
        if result:
            r = result[0]
            return DomainStats(
                domain=domain,
                total_schemas=r["total"],
                approval_rate=r["approved"] / r["total"],
                correction_rate=r["with_corrections"] / r["total"]
            )
            
        return DomainStats(domain=domain)
```

---

# Ğ˜Ğ¢ĞĞ“Ğ: Ğ¡Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | Ğ¤Ğ°Ğ·Ğ° |
|-----------|------------|-----------|------|
| ControlPanel API | FastAPI + PostgreSQL | P0 | 1 |
| RabbitMQ Setup | RabbitMQ 3.13 | P0 | 1 |
| UCA HTTP Worker | Python + aiohttp | P0 | 1 |
| Delta Lake Writer | Delta Lake + MinIO | P0 | 1 |
| cure_data_parser | Python + Spark | P0 | 1 |
| PostgreSQL Loader | SQLAlchemy + Alembic | P0 | 1 |
| UCA Browser Worker | Playwright | P1 | 2 |
| ControlPanel UI | React + TypeScript | P1 | 2 |
| Proxy Manager | Custom | P1 | 2 |
| trash_swamp | MinIO | P1 | 2 |
| Monitoring Stack | Prometheus + Grafana | P1 | 2 |
| AI Schema Generator | Claude API + Playwright | P2 | 3 |
| Feedback System | Custom + MongoDB | P2 | 3 |
| Schema Auto-fix | Claude API | P2 | 3 |

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ Ğ¤Ğ°Ğ·Ñ‹ 1 (MVP).**
